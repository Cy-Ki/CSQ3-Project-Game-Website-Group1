<!DOCTYPE html>
<html lang="en" onkeydown="birbFly(1)" onkeyup="birbFly(0)">
	<head>	
		<title>Floppy Bird</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+1" crossorigin="anonymous">
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH01sSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=Ranchers&display=swap" rel="stylesheet">
		<style>
			* {
				font-family: 'Ranchers', cursive;
			}
			#header {
				text-align: center;
				border-radius: 0px 0px 30px 30px;
				background-color: white;
				color: gray;
				border: 2px inset lightgray
			}
			#theGame {
				border: 1px solid black;
				width: 600px;
				height: 500px;
				margin: auto;
				padding: 0px;
				overflow: hidden;
				background-color: skyblue;
			}
			#deathColumn {
				height: 500px;
				left: 600px;
				position: relative;
				width: 100px;
				animation: deathColumn 1.75s infinite linear;
				background-color: green;
			}
			@keyframes deathColumn {
				0%{left: 600px;}
				100%{left: -175px}
			}
			@keyframes hole {
				0%{left: 600px;}
				100%{left: -175px}
			}
			#hole {
				background-color: skyblue;
				height: 150px;
				position: relative;
				top: -500px;
				left: 600px;
				animation: hole 1.75s infinite linear;
			}
			#birb {
				width: 30px;
				height: 30px;
				background-image: url("https://visualpharm.com/assets/832/Bird-595b40b65ba036ed117d296d.svg");
				top: 250px;
				margin-left: 30px;
				position: absolute;
			}
		</style>
	</head>
	<body>
		<div id ="header">
			<h1>Floppy Bird</h1>
		</div>
		<div id="theGame">
			<div id="deathColumn"></div>
			<div id="hole" onload="holeRandomizer()"></div>
			<div id="birb"></div>
		</div>
		<br>
		<hr>
		<div>
			<h2>How to play</h2>
			<p>Press any key to go up, release to go down. Avoid all the obstacles on the way by going through the gap between the obstacles, and avoid crashing into the borders of the games as it results in a game over.</p>
			<br>
			<hr>
			<h2>Tips and Tricks:</h2>
			<p>If you have played the original Flappy Bird before, you know what to do. c:</p>
			<p>As for those, try to be familiar with the appropriate timing to make the object continuously go up and down in a stable fashion.</p>
			
		</div>
	</body>
	<script>
		var hole = document.getElementById("hole");
		var birb = document.getElementById("birb");
		var isFlying = 0;
		var score = 0;
		
		hole.addEventListener("animationiteration", theRandomizer);
		function theRandomizer() {
			var rand = -((Math.random()*300)+200);
			hole.style.top = rand + "px";			
			score++;

		}
		
		setInterval(function(){
			var birbPosition = parseInt(window.getComputedStyle(birb).getPropertyValue("top"));
			var deathColumns = parseInt(window.getComputedStyle(deathColumn).getPropertyValue("left"));
			var holeBorders = parseInt(window.getComputedStyle(hole).getPropertyValue("top"));
			var youLive = holeBorders + 580;
			if ((isFlying == 0)&&(birbPosition < 550)&&(birbPosition >= 80)) {
				birb.style.top = (birbPosition + 4) + "px";
			} else if (birbPosition >= 550){
				birb.style.top = "550px";
				alert("Game Over! Your Score is: " + score);
				birb.style.top = "250px";
				location.reload();
			} else if (birbPosition <=80) {
				birb.style.top = "80px";
				alert("Game Over! Your Score is: " + score);
				birb.style.top = "250px";
				location.reload();
			} 
			if ((deathColumns<60)&&(deathColumns>-40)&&((birbPosition<youLive)||(birbPosition>youLive+120))) {
				alert("Game Over! Your Score is: " + score);
				birb.style.top = "250px";
				location.reload();
			}
		},15);
		
		function birbFly(fly) {
			var isFlying = fly; 
			var countForNoRepetition = 0;
			if (fly == 1){
				var upAnimation = setInterval(function(){
					countForNoRepetition++;
					var birbPosition = parseInt(window.getComputedStyle(birb).getPropertyValue("top"));
					if (isFlying == 1) {
						birb.style.top = (birbPosition - 7) + "px";
					}
					if (countForNoRepetition > 12){
						clearInterval(upAnimation);
					}
				},15);
			}
		}
		// bird icon: https://www.visualpharm.com/free-icons/bird-595b40b65ba036ed117d296d
	</script>
</html>
